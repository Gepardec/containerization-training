== Introduction to container compose

=== Discussion: Processes vs. applications

Containers and images describe individual processes. +
What will we need to describe entire applications?

=== Learning objectives

By the end of this module, trainees will be able to

* Design scalable Docker services
* Leverage Docker's built in service discovery mechanism
* Write a compose file describing an application

=== Distributed application architecture

* Applications consisting of one or more containers across one or more nodes
* Docker Compose facilitates multi-container design [.keyword]#on a single node#

=== Container services

* Goal: declare and (re)configure many similar containers all at once
* Goal: scale apps by adding containers seamlessly
* A service defines the desired state of a group of identically configured containers
* Docker provides transparent service discovery for Services

=== Service discovery

image::10_compose/service-discovery.svg[]

Services are assigned a [.keyword]#Virtual IP# which spreads traffic out across the underlying container automatically.

[.columns]
=== Our application: Dockercoins

[.column]
image:10_compose/dockercoins.png[width=50%] +
(DockerCoins 2016 logo courtesy of [.keyword]#@XtlCnslt# and [.keyword]#@ndeloof#. Thanks!)

[.column]
* It is a Dockercoin miner! +
üí∞üê≥üì¶üö¢
* Dockercoins consist of 5 services working together: 
image:10_compose/dockercoins-flow.svg[]

[.dark_background.demo.background]
=== icon:task[role=moby_icon] Instructor demo: Docker-Compose

See the demo

* Docker Compose

in the exercise book.

[.dark_background.exercise.background]
=== icon:task[role=moby_icon] Exercise: Compose apps

Work through

* Starting a Compose App
* Scaling s Compose App

in the exercise book.

++++
<h2 id="exercise_compose_app" class="timer"></h2>
++++

=== Container Compose takeaways

* Docker Compose makes single node orchestration easy
* Compose services makes scaling applications easy
* Bottleneck identification important
* Syntactically: [.keyword]#docker-compose.yml# + API

=== Further reading

* Docker compose examples: link:http://dockr.ly/1FL2VQ6[http://dockr.ly/1FL2VQ6]
* Overview of docker-compose CLI: link:http://dockr.ly/2wtQlZT[http://dockr.ly/2wtQlZT]
* docker-compose.yaml reference: link:http://dockr.ly/2iHUpeX[http://dockr.ly/2iHUpeX]
* Docker Compose and Windows: link:http://bit.ly/2watrqk[http://bit.ly/2watrqk]